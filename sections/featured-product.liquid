{{ 'section-main-product.css' | asset_url | stylesheet_tag }}
{{ 'section-featured-product.css' | asset_url | stylesheet_tag }}
{{ 'component-accordion.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}
{{ 'component-rte.css' | asset_url | stylesheet_tag }}
{{ 'component-slider.css' | asset_url | stylesheet_tag }}
<link rel="stylesheet" href="{{ 'component-deferred-media.css' | asset_url }}" media="print" onload="this.media='all'">
<style type="text/css">
  .Add_Wishlist {margin-bottom: 20px;display: flex;justify-content: space-between;}
  .btn-wishlist{
    font-family: DM Sans;
    font-style: normal;
    font-weight: normal;
    font-size: 16px;
    line-height: 21px;
    color: #1D1F1E;
    display: inline-flex;
  }
  a.btn-wishlist svg {
    margin-right: 10px;
  }
  .share-button__button ul {
      list-style: none;
      padding-left: 0px;
      margin-bottom: 0px;
  }

  .share-button__button ul li {
      display: inline-block;
      margin: 0px 10px;
  }

  .share-button__button ul li:last-child {
      margin-right: 0px;
}
</style>
{%- assign product = section.settings.product -%}

{%- assign first_3d_model = product.media | where: "media_type", "model" | first -%}

{% assign display_countdown = false %}
{% assign display_stock_progress = false %}
{% assign expire = 72 %}
{% assign countdown_header_text = settings.countdown_header_text %}
{% assign countdown_type = settings.type_countdown_timer %}

{% assign product_features = product.metafields.products %}

{% if product_features.show_features contains 'display-countdown' %}
    {% assign display_countdown = true %}
{% endif %}

{% if product_features.show_features contains 'display-stock-progress' %}
    {% assign display_stock_progress = true %}
{% endif %}

{% if product_features.countdown_timer %}
    {% assign expire = product_features.countdown_timer %}
{% endif %}

{%- if first_3d_model -%}
  {{ 'component-product-model.css' | asset_url | stylesheet_tag }}
  <link id="ModelViewerStyle" rel="stylesheet" href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css" media="print" onload="this.media='all'">
  <link id="ModelViewerOverride" rel="stylesheet" href="{{ 'component-model-viewer-ui.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

<section class="{% if section.settings.secondary_background %}background-secondary{% else %}spaced-section{% endif %}">
  <div class="page-width">
    <div class="header-section">
      <h2 class="product--heading">{{ section.settings.title }}</h2>
      <div class="product-subheading">{{ section.settings.sub_title }}</div>
    </div>
    <div class="featured-product product grid grid--1-col {% if product.media.size > 0 %}grid--2-col-tablet{% else %}product--no-media{% endif %}">
      <div class="grid__item product__media-wrapper">
        <a class="skip-to-content-link button visually-hidden" href="#ProductInfo-{{ section.id }}">
          {{ "accessibility.skip_to_product_info" | t }}
        </a>
        <product-gallery class="product-gallery">
        {%- if product.media.size > 1 -%}
        <ul class="product-gallery__nav">
          {%- for media in product.media -%}
            <li class="product-gallery__nav-item {% if media.id == product.selected_or_first_available_variant.featured_media.id %}product-gallery__nav-item--active{% endif %}" data-media-id="{{ media.id }}">
              {% render 'product-thumbnail', media: media %}
            </li>
          {%- endfor -%}
        </ul>
        {%- endif -%}
        <div class="product-gallery__images">
          {%- for media in product.media -%}
            <div class="product-gallery__image {% if media.id == product.selected_or_first_available_variant.featured_media.id or product.media.size == 1 %}product-gallery__image--active{% endif %}" data-media-id="{{ media.id }}">
              {% render 'product-thumbnail', media: media %}
            </div>
          {%- endfor -%}
          <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="{{ 'accessibility.previous_slide' | t }}">{% render 'icon-caret' %}</button>
          <button type="button" class="slider-button slider-button--next" name="next" aria-label="{{ 'accessibility.next_slide' | t }}">{% render 'icon-caret' %}</button>
        </div>
      </product-gallery>
      </div>
      <div class="product__info-wrapper grid__item">
        <div id="ProductInfo-{{ section.id }}" class="product__info-container">
          {%- assign product_form_id = 'product-form-' | append: section.id -%}

          {%- for block in section.blocks -%}
            {%- case block.type -%}
            {%- when 'text' -%}
              <p class="product__text{% if block.settings.text_style == 'uppercase' %} caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %} subtitle{% endif %}" {{ block.shopify_attributes }}>
                {{- block.settings.text -}}
              </p>
            {%- when 'title' -%}
              <h2 class="h1 product__title" {{ block.shopify_attributes }}>
                {%- if product.title != blank -%}
                  {{ product.title | escape }}
                {%- else -%}
                  {{ 'onboarding.product_title' | t }}
                {%- endif -%}
              </h2>
              {%- when 'people-view' -%}
                <div class="box-product">
                    <ul>
                        <li>{% render 'icon-cart-view' %} 2 people have this item in their cart and are ready to checkout</li>
                        <li>{% render 'icon-stock' %} Only 4 left in stock</li>
                        <li>{% render 'icon-view' %} 10 people are currently viewing this product</li>
                        <li>{% render 'icon-delivery' %} Estimated delivery in 3 business days</li>
                    </ul>
                </div>
            {%- when 'price' -%}
              <div class="no-js-hidden" id="price-{{ section.id }}" {{ block.shopify_attributes }}>
                {%- render 'price', product: product, use_variant: true, show_badges: true, price_class: 'price--large' -%}
              </div>
              {%- if product != blank -%}
                <div {{ block.shopify_attributes }}>
                  {%- form 'product', product -%}
                    <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                    {{ form | payment_terms }}
                  {%- endform -%}
                </div>
              {%- endif -%}
            {%- when 'quantity_selector' -%}
 
              {% when 'delivery' %}
              <div class="delivery_time">
                <p>
                <svg width="18" height="15" viewBox="0 0 18 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.55 10.3125H17.1V7.14551C17.1 6.77344 16.9566 6.41602 16.7034 6.15234L13.8937 3.22559C13.6406 2.96191 13.2975 2.8125 12.9403 2.8125H11.7V1.40625C11.7 0.629883 11.0953 0 10.35 0H1.35C0.604688 0 0 0.629883 0 1.40625V10.7812C0 11.5576 0.604688 12.1875 1.35 12.1875H1.8C1.8 13.7402 3.00937 15 4.5 15C5.99062 15 7.2 13.7402 7.2 12.1875H10.8C10.8 13.7402 12.0094 15 13.5 15C14.9906 15 16.2 13.7402 16.2 12.1875H17.55C17.7975 12.1875 18 11.9766 18 11.7188V10.7812C18 10.5234 17.7975 10.3125 17.55 10.3125ZM4.5 13.5938C3.75469 13.5938 3.15 12.9639 3.15 12.1875C3.15 11.4111 3.75469 10.7812 4.5 10.7812C5.24531 10.7812 5.85 11.4111 5.85 12.1875C5.85 12.9639 5.24531 13.5938 4.5 13.5938ZM13.5 13.5938C12.7547 13.5938 12.15 12.9639 12.15 12.1875C12.15 11.4111 12.7547 10.7812 13.5 10.7812C14.2453 10.7812 14.85 11.4111 14.85 12.1875C14.85 12.9639 14.2453 13.5938 13.5 13.5938ZM15.75 7.5H11.7V4.21875H12.9403L15.75 7.14551V7.5Z" fill="#3167EB"/>
                </svg>
                Order in the next <span class="time">9 hours 19 minutes</span> to get it by Tuesday Aug 10</p>
              </div>
            {%- when 'share' -%}
              <script src="{{ 'share.js' | asset_url }}" defer="defer"></script>
              <div class="Add_Wishlist">
                <a class="btn-wishlist" href="#">
                {% render 'icon-wishlist' %}
                Add to Wishlist</a>
                <share-button class="share-button" {{ block.shopify_attributes }}>
                  <button class="share-button__button hidden">
                    {% render 'icon-share' %}
                    {{ block.settings.share_label | escape }}
                  </button>
                  <div class="share-button__button">
                    <ul>
                      <li><a href="#">
                        <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.0115 8C16.0115 3.6 12.4089 0 8.00576 0C3.60259 0 0 3.6 0 8C0 12 2.90209 15.3 6.70483 15.9V10.3H4.70339V8H6.70483V6.2C6.70483 4.2 7.90569 3.1 9.70699 3.1C10.6076 3.1 11.5083 3.3 11.5083 3.3V5.3H10.5076C9.50684 5.3 9.20663 5.9 9.20663 6.5V8H11.4082L11.0079 10.3H9.10656V16C13.1094 15.4 16.0115 12 16.0115 8Z" fill="#1D1F1E"/>
                        </svg>
                      </a></li>
                      <li><a href="#">
                        <svg width="17" height="14" viewBox="0 0 17 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.0389 1.61538C15.4384 1.93846 14.838 2.04615 14.1375 2.15385C14.838 1.72308 15.3384 1.07692 15.5385 0.215384C14.9381 0.646154 14.2376 0.861539 13.437 1.07692C12.8366 0.430769 11.9359 0 11.0353 0C8.93375 0 7.3326 2.15385 7.83296 4.30769C5.13102 4.2 2.72929 2.8 1.02806 0.646154C0.127416 2.26154 0.627776 4.30769 2.02878 5.38462C1.52842 5.38462 1.02806 5.16923 0.527704 4.95385C0.527704 6.56923 1.6285 8.07692 3.12958 8.50769C2.62922 8.61539 2.12886 8.72308 1.6285 8.61539C2.02878 10.0154 3.22965 11.0923 4.73073 11.0923C3.52986 12.0615 1.72857 12.6 0.0273438 12.3846C1.52842 13.3538 3.22965 14 5.03095 14C11.1353 14 14.5378 8.50769 14.3376 3.44615C15.0381 3.01538 15.6386 2.36923 16.0389 1.61538Z" fill="#1D1F1E"/>
                        </svg>

                      </a></li>
                      <li><a href="#">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.06436 0C3.66119 0 0.0585938 3.6 0.0585938 8C0.0585938 11.3 2.06004 14.1 4.86205 15.3C4.86205 14.7 4.86205 14.1 4.96212 13.5C5.16226 12.8 5.96284 9.1 5.96284 9.1C5.96284 9.1 5.66263 8.6 5.66263 7.8C5.66263 6.6 6.36314 5.7 7.16371 5.7C7.86422 5.7 8.2645 6.2 8.2645 6.9C8.2645 7.6 7.76414 8.7 7.564 9.7C7.36385 10.5 7.96429 11.2 8.86494 11.2C10.366 11.2 11.3667 9.3 11.3667 6.9C11.3667 5.1 10.1659 3.8 8.06436 3.8C5.66263 3.8 4.16155 5.6 4.16155 7.6C4.16155 8.3 4.3617 8.8 4.66191 9.2C4.76199 9.4 4.86205 9.4 4.76198 9.6C4.76198 9.7 4.66191 10.1 4.56184 10.2C4.46176 10.4 4.3617 10.5 4.16155 10.4C3.06076 9.9 2.56039 8.7 2.56039 7.3C2.56039 5 4.46176 2.3 8.2645 2.3C11.3667 2.3 13.3682 4.5 13.3682 6.9C13.3682 10 11.667 12.4 9.06508 12.4C8.16443 12.4 7.36385 11.9 7.06364 11.4C7.06364 11.4 6.56327 13.2 6.4632 13.6C6.26305 14.2 5.96285 14.8 5.66263 15.3C6.36314 15.5 7.1637 15.6 7.96428 15.6C12.3674 15.6 15.97 12 15.97 7.6C16.0701 3.6 12.4675 0 8.06436 0Z" fill="#1D1F1E"/>
                        </svg>

                      </a></li>
                      <li><a href="#">
                        <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.99405 1.44578C11.1161 1.44578 11.4054 1.44578 12.2735 1.44578C13.0452 1.44578 13.431 1.63855 13.7203 1.73494C14.1062 1.92771 14.3955 2.0241 14.6849 2.31325C14.9743 2.60241 15.1672 2.89157 15.2636 3.27711C15.3601 3.56627 15.4565 3.95181 15.553 4.72289C15.553 5.59036 15.553 5.78313 15.553 8C15.553 10.2169 15.553 10.4096 15.553 11.2771C15.553 12.0482 15.3601 12.4337 15.2636 12.7229C15.0707 13.1084 14.9743 13.3976 14.6849 13.6867C14.3955 13.9759 14.1062 14.1687 13.7203 14.2651C13.431 14.3614 13.0452 14.4578 12.2735 14.5542C11.4054 14.5542 11.2125 14.5542 8.99405 14.5542C6.77558 14.5542 6.58267 14.5542 5.71458 14.5542C4.94294 14.5542 4.55712 14.3614 4.26775 14.2651C3.88193 14.0723 3.59257 13.9759 3.3032 13.6867C3.01384 13.3976 2.82093 13.1084 2.72447 12.7229C2.62802 12.4337 2.53156 12.0482 2.43511 11.2771C2.43511 10.4096 2.43511 10.2169 2.43511 8C2.43511 5.78313 2.43511 5.59036 2.43511 4.72289C2.43511 3.95181 2.62802 3.56627 2.72447 3.27711C2.91738 2.89157 3.01384 2.60241 3.3032 2.31325C3.59257 2.0241 3.88193 1.83133 4.26775 1.73494C4.55712 1.63855 4.94294 1.54217 5.71458 1.44578C6.58267 1.44578 6.87204 1.44578 8.99405 1.44578ZM8.99405 0C6.77558 0 6.58267 0 5.71458 0C4.84648 0 4.26775 0.192772 3.78548 0.385543C3.3032 0.578314 2.82093 0.867471 2.33865 1.3494C1.85638 1.83133 1.66347 2.21687 1.3741 2.79518C1.18119 3.27711 1.08474 3.85542 0.988281 4.72289C0.988281 5.59036 0.988281 5.87952 0.988281 8C0.988281 10.2169 0.988281 10.4096 0.988281 11.2771C0.988281 12.1446 1.18119 12.7229 1.3741 13.2048C1.56701 13.6867 1.85638 14.1687 2.33865 14.6506C2.82093 15.1325 3.20675 15.3253 3.78548 15.6145C4.26775 15.8072 4.84648 15.9036 5.71458 16C6.58267 16 6.87204 16 8.99405 16C11.1161 16 11.4054 16 12.2735 16C13.1416 16 13.7203 15.8072 14.2026 15.6145C14.6849 15.4217 15.1672 15.1325 15.6494 14.6506C16.1317 14.1687 16.3246 13.7831 16.614 13.2048C16.8069 12.7229 16.9034 12.1446 16.9998 11.2771C16.9998 10.4096 16.9998 10.1205 16.9998 8C16.9998 5.87952 16.9998 5.59036 16.9998 4.72289C16.9998 3.85542 16.8069 3.27711 16.614 2.79518C16.4211 2.31325 16.1317 1.83133 15.6494 1.3494C15.1672 0.867471 14.7813 0.674699 14.2026 0.385543C13.7203 0.192772 13.1416 0.0963856 12.2735 0C11.4054 0 11.2125 0 8.99405 0Z" fill="#1D1F1E"/>
                        <path d="M8.99405 3.85542C6.67913 3.85542 4.84648 5.68675 4.84648 8C4.84648 10.3133 6.67913 12.1446 8.99405 12.1446C11.309 12.1446 13.1416 10.3133 13.1416 8C13.1416 5.68675 11.309 3.85542 8.99405 3.85542ZM8.99405 10.6988C7.54722 10.6988 6.29331 9.54217 6.29331 8C6.29331 6.55422 7.45077 5.30121 8.99405 5.30121C10.4409 5.30121 11.6948 6.45783 11.6948 8C11.6948 9.44578 10.4409 10.6988 8.99405 10.6988Z" fill="#1D1F1E"/>
                        <path d="M13.2381 4.72289C13.7708 4.72289 14.2026 4.29136 14.2026 3.75904C14.2026 3.22671 13.7708 2.79518 13.2381 2.79518C12.7054 2.79518 12.2735 3.22671 12.2735 3.75904C12.2735 4.29136 12.7054 4.72289 13.2381 4.72289Z" fill="#1D1F1E"/>
                        </svg>
                      </a></li>
                    </ul>
                  </div>
                </share-button>
              </div>

            {%- when 'variant_picker' -%}
              {%- unless product.has_only_default_variant -%}
                {%- if block.settings.picker_type == 'button' -%}
                  <variant-radios class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}" data-update-url="false" {{ block.shopify_attributes }}>
                    {%- for option in product.options_with_values -%}
                        <fieldset class="js product-form__input" id="{{ option.name }}">
                          <legend class="form__label">{{ option.name }}</legend>
                          {%- for value in option.values -%}
                            <input type="radio" id="{{ section.id }}-{{ option.name }}-{{ forloop.index0 }}"
                                  name="{{ option.name }}"
                                  value="{{ value | escape }}"
                                  form="product-form-{{ section.id }}"
                                  {% if option.selected_value == value %}checked{% endif %}
                            >
                            <label for="{{ section.id }}-{{ option.name }}-{{ forloop.index0 }}">
                              {{ value }}
                            </label>
                          {%- endfor -%}
                        </fieldset>
                    {%- endfor -%}
                    <script type="application/json">
                      {{ product.variants | json }}
                    </script>
                  </variant-radios>
                {%- else -%}
                  <variant-selects class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}" data-update-url="false" {{ block.shopify_attributes }}>
                    {%- for option in product.options_with_values -%}
                      <div class="product-form__input product-form__input--dropdown ">
                        <label class="form__label" for="Option-{{ section.id }}-{{ forloop.index0 }}">
                          {{ option.name }}
                        </label>
                        <div class="select">
                          <select id="Option-{{ section.id }}-{{ forloop.index0 }}"
                            class="select__select"
                            name="options[{{ option.name | escape }}]"
                            form="product-form-{{ section.id }}"
                          >
                            {%- for value in option.values -%}
                              <option value="{{ value | escape }}" {% if option.selected_value == value %}selected="selected"{% endif %}>
                                {{ value }}
                              </option>
                            {%- endfor -%}
                          </select>
                          {% render 'icon-caret' %}
                        </div>
                      </div>
                    {%- endfor -%}

                    <script type="application/json">
                      {{ product.variants | json }}
                    </script>
                  </variant-selects>
                {%- endif -%}
              {%- endunless -%}

              <noscript class="product-form__noscript-wrapper-{{ section.id }}">
                <div class="product-form__input{% if product.has_only_default_variant %} hidden{% endif %}">
                  <label class="form__label" for="Variants-{{ section.id }}">{{ 'products.product.product_variants' | t }}</label>
                  <div class="select">
                    <select name="id" id="Variants-{{ section.id }}" class="select__select" form="product-form">
                      {%- for variant in product.variants -%}
                        <option
                          {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                          {% if variant.available == false %}disabled{% endif %}
                          value="{{ variant.id }}"
                        >
                          {{ variant.title }}
                          {%- if variant.available == false %} - {{ 'products.product.sold_out' | t }}{% endif %}
                          - {{ variant.price | money | strip_html }}
                        </option>
                      {%- endfor -%}
                    </select>
                    {% render 'icon-caret' %}
                  </div>
                </div>
              </noscript>
            {%- when 'buy_buttons' -%}
              <div {{ block.shopify_attributes }}>
                {%- if product != blank -%}
                  <product-form class="product-form">
                    {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
                      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                      <div class="product-form__buttons">
                        <div class="quantity_addtocart">
                          <quantity-input class="quantity">
                            <button class="quantity__button no-js-hidden" name="minus" type="button">
                              <span class="visually-hidden">{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}</span>
                              {% render 'icon-minus' %}
                            </button>
                            <input class="quantity__input"
                                   type="number"
                                   name="quantity"
                                   id="Quantity-{{ section.id }}"
                                   min="1"
                                   value="1"
                                   form="product-form-{{ section.id }}"
                                   >
                            <button class="quantity__button no-js-hidden" name="plus" type="button">
                              <span class="visually-hidden">{{ 'products.product.quantity.increase' | t: product: product.title | escape }}</span>
                              {% render 'icon-plus' %}
                            </button>
                          </quantity-input>

                          <button
                                  type="submit"
                                  name="add"
                                  class="product-form__submit button button--full-width {% if block.settings.show_dynamic_checkout and product.selling_plan_groups == empty %}button--secondary{% else %}button--primary{% endif %}"
                                  {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
                                  >
                            {%- if product.selected_or_first_available_variant.available -%}
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M4.2 11.2C3.43 11.2 2.807 11.83 2.807 12.6C2.807 13.37 3.43 14 4.2 14C4.97 14 5.6 13.37 5.6 12.6C5.6 11.83 4.97 11.2 4.2 11.2Z" fill="white"/>
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M0 0V1.4H1.4L3.92 6.713L2.975 8.428C2.863 8.624 2.8 8.855 2.8 9.1C2.8 9.87 3.43 10.5 4.2 10.5H12.6V9.1H4.494C4.396 9.1 4.319 9.023 4.319 8.925L4.34 8.841L4.97 7.7H10.185C10.71 7.7 11.172 7.413 11.41 6.979L13.916 2.436C13.972 2.338 14 2.219 14 2.1C14 1.715 13.685 1.4 13.3 1.4H2.947L2.289 0H0Z" fill="white"/>
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M11.2 11.2C10.43 11.2 9.807 11.83 9.807 12.6C9.807 13.37 10.43 14 11.2 14C11.97 14 12.6 13.37 12.6 12.6C12.6 11.83 11.97 11.2 11.2 11.2Z" fill="white"/>
                            </svg>
                            Add to Cart
                            {%- else -%}
                            {{ 'products.product.sold_out' | t }}
                            {%- endif -%}
                          </button>
                        </div>
                        {%- if block.settings.show_dynamic_checkout -%}
                          {{ form | payment_button }}
                        {%- endif -%}
                      </div>
                    {%- endform -%}
                  </product-form>
                {%- else -%}
                  <div class="product-form">
                    <div class="product-form__buttons form">
                      <button
                        type="submit"
                        name="add"
                        class="product-form__submit button button--full-width button--primary"
                        disabled
                      >
                        {{ 'products.product.sold_out' | t }}
                      </button>
                    </div>
                  </div>
                {%- endif -%}
              </div>
              {{ 'component-pickup-availability.css' | asset_url | stylesheet_tag }}

                {%- assign pick_up_availabilities = product.selected_or_first_available_variant.store_availabilities | where: 'pick_up_enabled', true -%}

                <pickup-availability class="product__pickup-availabilities no-js-hidden"
                    {% if product.selected_or_first_available_variant.available and pick_up_availabilities.size > 0 %} available{% endif %}
                    data-base-url="{{ shop.url }}{{ routes.root_url }}"
                    data-variant-id="{{ product.selected_or_first_available_variant.id }}"
                    data-has-only-default-variant="{{ product.has_only_default_variant }}"
                >
                    <template>
                        <pickup-availability-preview class="pickup-availability-preview">
                            {% render 'icon-unavailable' %}
                            <div class="pickup-availability-info">
                                <p class="caption-large">{{ 'products.product.pickup_availability.unavailable' | t }}</p>
                                <button class="pickup-availability-button link link--text underlined-link">{{ 'products.product.pickup_availability.refresh' | t }}</button>
                            </div>
                        </div>
                    </template>
                </pickup-availability>
                </div>

                <script src="{{ 'pickup-availability.js' | asset_url }}" defer="defer"></script>
            {%- when 'countdown-timer' -%}
                {% if product.available %}
                    {% comment %} countdown-timer start {% endcomment %}
                    {% if settings.enable_countdown_timer %}
                        {% if display_countdown %}
                            {% if countdown_type == '1' %}
                                {% include 'product-countdown-timer-1', expire: expire, countdown_header_text: countdown_header_text %}
                            {% else %}
                                {% include 'product-countdown-timer-2', expire: expire, countdown_header_text: countdown_header_text %}
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}
                {% comment %} countdown-timer end {% endcomment %}

            {%- when 'remaining-stock' -%}
                {% if product.available %}
                    {% comment %} product scarcity bar start {% endcomment %}
                    {% if settings.enable_scarcity %}
                        {% if display_stock_progress %}
                            {% include 'product-progress-bar' %}
                        {% endif %}
                    {% endif %}
                    {% comment %} product scarcity bar start {% endcomment %}
                {% endif %}

            {%- when 'proposition-icons' -%}
                {% include 'proposition' %}
            {%- when 'custom_liquid' -%}
              {{ block.settings.custom_liquid }}
            {%- when 'rating' -%}
             <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
            {%- endcase -%}
          {%- endfor -%}
        </div>
      </div>
    </div>

    <product-modal id="ProductModal-{{ section.id }}" class="product-media-modal media-modal">
      <div class="product-media-modal__dialog" role="dialog" aria-label="{{ 'products.modal.label' | t }}" aria-modal="true" tabindex="-1">
        <button id="ModalClose-{{ section.id }}" type="button" class="product-media-modal__toggle" aria-label="{{ 'accessibility.close' | t }}">{% render 'icon-close' %}</button>

        <div class="product-media-modal__content" role="document" aria-label="{{ 'products.modal.label' | t }}" tabindex="0">
          {%- liquid
            if product.selected_or_first_available_variant.featured_media != null
              assign media = product.selected_or_first_available_variant.featured_media
              render 'product-media', media: media, loop: section.settings.enable_video_looping, variant_image: section.settings.hide_variants
            endif
          -%}

          {%- for media in product.media -%}
            {%- liquid
              if section.settings.hide_variants and media_to_render contains media.id
                assign variant_image = true
              else
                assign variant_image = false
              endif

              unless media.id == product.selected_or_first_available_variant.featured_media.id
                render 'product-media', media: media, loop: section.settings.enable_video_looping, variant_image: variant_image
              endunless
            -%}
          {%- endfor -%}
        </div>
      </div>
    </product-modal>
  </div>
</section>

{% javascript %}
  if (!customElements.get('product-modal')) {
    customElements.define('product-modal', class ProductModal extends ModalDialog {
      constructor() {
        super();
      }

      hide() {
        super.hide();
        window.pauseAllMedia();
      }

      show(opener) {
        super.show(opener);
        this.showActiveMedia();
      }

      showActiveMedia() {
        this.querySelectorAll(`[data-media-id]:not([data-media-id="${this.openedBy.getAttribute("data-media-id")}"])`).forEach((element) => {
            element.classList.remove('active');
          }
        )
        const activeMedia = this.querySelector(`[data-media-id="${this.openedBy.getAttribute("data-media-id")}"]`);
        const activeMediaTemplate = activeMedia.querySelector('template');
        const activeMediaContent = activeMediaTemplate ? activeMediaTemplate.content : null;
        activeMedia.classList.add('active');
        activeMedia.scrollIntoView();

        const container = this.querySelector('[role="document"]');
        container.scrollLeft = (activeMedia.width - container.clientWidth) / 2;

        if (activeMedia.nodeName == 'DEFERRED-MEDIA' && activeMediaContent && activeMediaContent.querySelector('.js-youtube'))
          activeMedia.loadContent();
      }
    });
  }
  class ProductGallery extends HTMLElement {
    constructor() {
      super();
      this.init()

      // Add resize observer to update container height
      const resizeObserver = new ResizeObserver(entries => this.update());
      resizeObserver.observe(this);

      // Bind event listeners
      this.navItems.forEach(item => item.addEventListener('click', this.onNavItemClick.bind(this)))
      this.prevButton.addEventListener('click', this.onButtonClick.bind(this));
      this.nextButton.addEventListener('click', this.onButtonClick.bind(this));
      // Listen for variant selection change to make current variant image active
      window.addEventListener('message', this.onVariantChange.bind(this))
    }

    init() {
      // Set up our DOM element variables
      this.imagesContainer = this.querySelector('.product-gallery__images');
      this.navItems = this.querySelectorAll('.product-gallery__nav-item');
      this.images = this.querySelectorAll('.product-gallery__image');
      this.prevButton = this.querySelector('button[name="previous"]');
      this.nextButton = this.querySelector('button[name="next"]');
      // If there is no active images set the first image to active
      if (this.findCurrentIndex() === -1) {
        this.setCurrentImage(this.images[0])
      }
    }

    onVariantChange(event) {
      if (!event.data || event.data.type !== 'variant_changed') return 
      const currentImage = Array.from(this.images).find(item => item.dataset.mediaId == event.data.variant.featured_media.id)
      if (currentImage) {
        this.setCurrentImage(currentImage)
      }
    }

    onNavItemClick(event) {
      const mediaId = event.target.closest('li').dataset.mediaId
      this.images.forEach(item => item.classList.remove('product-gallery__image--active'))
      this.setCurrentImage(Array.from(this.images).find(item => item.dataset.mediaId === mediaId))
    }

    update() {
      this.style.height = `${this.imagesContainer.offsetHeight}px`
      this.prevButton.removeAttribute('disabled')
      this.nextButton.removeAttribute('disabled')
      if (this.findCurrentIndex() === 0) this.prevButton.setAttribute('disabled', true)
      if (this.findCurrentIndex() === this.images.length - 1) this.nextButton.setAttribute('disabled', true)
    }

    setCurrentImage(elem) {
      this.images.forEach(item => item.classList.remove('product-gallery__image--active'))
      elem.classList.add('product-gallery__image--active')
      this.update()
    }

    findCurrentIndex() {
      return Array.from(this.images).findIndex(item => item.classList.contains('product-gallery__image--active'))
    }

    onButtonClick(event) {
      event.preventDefault();
      let index = this.findCurrentIndex()
      if (event.currentTarget.name === 'next') {
        index++
      } else {
        index--
      }
      this.setCurrentImage(this.images[index])
    }
  }

  customElements.define('product-gallery', ProductGallery);
{% endjavascript %}
<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
{%- if first_3d_model -%}
  <script type="application/json" id="ProductJSON-{{ product.id }}">
    {{ product.media | where: 'media_type', 'model' | json }}
  </script>
  <script src="{{ 'product-model.js' | asset_url }}" defer></script>
{%- endif -%}

<script type="application/ld+json">
  {
    "@context": "http://schema.org/",
    "@type": "Product",
    "name": {{ product.title | json }},
    "url": {{ shop.url | append: product.url | json }},
    {%- if product.selected_or_first_available_variant.featured_media -%}
      {%- assign media_size = product.selected_or_first_available_variant.featured_media.preview_image.width | append: 'x' -%}
      "image": [
        {{ product.featured_media | img_url: media_size | prepend: "https:" | json }}
      ],
    {%- endif -%}
    "description": {{ product.description | strip_html | json }},
    {%- if product.selected_or_first_available_variant.sku != blank -%}
      "sku": {{ product.selected_or_first_available_variant.sku | json }},
    {%- endif -%}
    "brand": {
      "@type": "Thing",
      "name": {{ product.vendor | json }}
    },
    "offers": [
      {%- for variant in product.variants -%}
        {
          "@type" : "Offer",
          {%- if variant.sku != blank -%}
            "sku": {{ variant.sku | json }},
          {%- endif -%}
          "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
          "price" : {{ variant.price | divided_by: 100.00 | json }},
          "priceCurrency" : {{ cart.currency.iso_code | json }},
          "url" : {{ shop.url | append: variant.url | json }}
        }{% unless forloop.last %},{% endunless %}
      {%- endfor -%}
    ]
  }
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    function isIE() {
      const ua = window.navigator.userAgent;
      const msie = ua.indexOf('MSIE ');
      const trident = ua.indexOf('Trident/');
      return (msie > 0 || trident > 0);
    }
    if (!isIE()) return;
    const hiddenInput = document.querySelector('#{{ product_form_id }} input[name="id"]');
    const noScriptInputWrapper = document.createElement('div');
    const variantSwitcher = document.querySelector('variant-radios[data-section="{{ section.id }}"]') || document.querySelector('variant-selects[data-section="{{ section.id }}"]');
    noScriptInputWrapper.innerHTML = document.querySelector('.product-form__noscript-wrapper-{{ section.id }}').textContent;
    variantSwitcher.outerHTML = noScriptInputWrapper.outerHTML;
    document.querySelector('#Variants-{{ section.id }}').addEventListener('change', function(event) {
      hiddenInput.value = event.currentTarget.value;
    });
  });
</script>

{% schema %}
{
  "name": "t:sections.featured-product.name",
  "tag": "section",
  "class": "featured-product-section spaced-section spaced-section--full-width",
  "blocks": [
    {
      "type": "text",
      "name": "t:sections.featured-product.blocks.text.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Text block",
          "label": "t:sections.featured-product.blocks.text.settings.text.label"
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            {
              "value": "body",
              "label": "t:sections.featured-product.blocks.text.settings.text_style.options__1.label"
            },
            {
              "value": "subtitle",
              "label": "t:sections.featured-product.blocks.text.settings.text_style.options__2.label"
            },
            {
              "value": "uppercase",
              "label": "t:sections.featured-product.blocks.text.settings.text_style.options__3.label"
            }
          ],
          "default": "body",
          "label": "t:sections.featured-product.blocks.text.settings.text_style.label"
        }
      ]
    },
    {
      "type": "title",
      "name": "t:sections.featured-product.blocks.title.name",
      "limit": 1
    },
    {
      "type": "price",
      "name": "t:sections.featured-product.blocks.price.name",
      "limit": 1
    },
    {
      "type": "quantity_selector",
      "name": "t:sections.featured-product.blocks.quantity_selector.name",
      "limit": 1
    },
    {
      "type": "variant_picker",
      "name": "t:sections.featured-product.blocks.variant_picker.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "options": [
            {
              "value": "dropdown",
              "label": "t:sections.featured-product.blocks.variant_picker.settings.picker_type.options__1.label"
            },
            {
              "value": "button",
              "label": "t:sections.featured-product.blocks.variant_picker.settings.picker_type.options__2.label"
            }
          ],
          "default": "button",
          "label": "t:sections.featured-product.blocks.variant_picker.settings.picker_type.label"
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "t:sections.featured-product.blocks.buy_buttons.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "t:sections.featured-product.blocks.buy_buttons.settings.show_dynamic_checkout.label",
          "info": "t:sections.featured-product.blocks.buy_buttons.settings.show_dynamic_checkout.info"
        }
      ]
    },
    {
      "type": "share",
      "name": "t:sections.featured-product.blocks.share.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "t:sections.featured-product.blocks.share.settings.text.label",
          "default": "Share"
        },
        {
          "type": "paragraph",
          "content": "t:sections.featured-product.blocks.share.settings.featured_image_info.content"
        },
        {
          "type": "paragraph",
          "content": "t:sections.featured-product.blocks.share.settings.title_info.content"
        }
      ]
    },
    {
            "type": "people-view",
            "name": "People View"
        },
    {
            "type": "countdown-timer",
            "name": "Countdown Timer",
            "limit": 1
        },
        {
            "type": "remaining-stock",
            "name": "Remaining Stock",
            "limit": 1
        },
    {
      "type": "custom_liquid",
      "name": "t:sections.featured-product.blocks.custom_liquid.name",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "t:sections.featured-product.blocks.custom_liquid.settings.custom_liquid.label"
        }
      ]
    },
    {
        "type": "delivery",
        "name": "Deelivery"
    },
    {
        "type": "proposition-icons",
        "name": "Proposition icons",
        "limit": 1
    },
    
    {
      "type": "rating",
      "name": "t:sections.featured-product.blocks.rating.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.featured-product.blocks.rating.settings.paragraph.content"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Stand Alone Product"
    },
    {
      "type": "richtext",
      "id": "sub_title",
      "label": "Text",
      "default": "<p>Use this section to showcase a particular product</p>"
    },
    {
      "type": "product",
      "id": "product",
      "label": "t:sections.featured-product.settings.product.label"
    },
    {
      "type": "checkbox",
      "id": "secondary_background",
      "default": false,
      "label": "t:sections.featured-product.settings.secondary_background.label"
    },
    {
      "type": "header",
      "content": "t:sections.featured-product.settings.header.content",
      "info": "t:sections.featured-product.settings.header.info"
    },
    {
      "type": "checkbox",
      "id": "hide_variants",
      "default": false,
      "label": "t:sections.main-product.settings.hide_variants.label"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "default": false,
      "label": "t:sections.featured-product.settings.enable_video_looping.label"
    }
  ],
  "presets": [
    {
      "name": "t:sections.featured-product.presets.name",
      "blocks": [
        {
          "type": "text",
          "settings": {
            "text": "{{ section.settings.product.vendor }}",
            "text_style": "uppercase"
          }
        },
        {
          "type": "title"
        },
        {
          "type": "text",
          "settings": {
            "text": "{{ section.settings.product.metafields.descriptors.subtitle.value }}",
            "text_style": "subtitle"
          }
        },
        {
          "type": "price"
        },
        {
          "type": "variant_picker"
        },
        {
          "type": "quantity_selector"
        },
        {
          "type": "buy_buttons"
        },
        {
          "type": "share"
        }
      ]
    }
  ]
}
{% endschema %}